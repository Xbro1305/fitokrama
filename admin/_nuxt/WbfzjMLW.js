import{O as F,P as x,Q as C,R as S,S as R,r as w,T,z as r,U as k,d as P,D as A,W as b,F as B,A as m,t as D,B as c,V as v,G as t,X as U,K as I,Y as N,m as _}from"./CD-ciyMC.js";import{u as $}from"./B83tnpwP.js";import{V as h,a as z,b as E,c as G}from"./S1xGE2Sl.js";import"./D2qL_eWx.js";import"./tHn_lS1N.js";const H=F({...x(),...C()},"VForm"),K=S()({name:"VForm",props:H(),emits:{"update:modelValue":n=>!0,submit:n=>!0},setup(n,u){let{slots:d,emit:s}=u;const o=R(n),i=w();function p(e){e.preventDefault(),o.reset()}function f(e){const a=e,l=o.validate();a.then=l.then.bind(l),a.catch=l.catch.bind(l),a.finally=l.finally.bind(l),s("submit",a),a.defaultPrevented||l.then(g=>{var V;let{valid:y}=g;y&&((V=i.value)==null||V.submit())}),a.preventDefault()}return T(()=>{var e;return r("form",{ref:i,class:["v-form",n.class],style:n.style,novalidate:!0,onReset:p,onSubmit:f},[(e=d.default)==null?void 0:e.call(d,o)])}),k(o,i)}}),Y=P({__name:"login",setup(n){$({title:"Вход"});const{isAuthenticated:u,login:d}=A(),s=b({email:"",password:""}),o=b({email:[],password:[]}),i=w(!1),p=async()=>{await d({mail:s.email,pass:s.password}),u&&_("/print")};return(f,e)=>(D(),B(h,{"max-width":"600px",class:"ma-auto"},{default:m(()=>[r(z,null,{default:m(()=>e[4]||(e[4]=[c(" Вход ")])),_:1}),r(K,{onSubmit:N(p,["prevent"])},{default:m(()=>[r(E,null,{default:m(()=>[r(v,{modelValue:t(s).email,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).email=a),label:"E-mail",type:"email","error-messages":t(o).email,onInput:e[1]||(e[1]=a=>t(o).email=[])},null,8,["modelValue","error-messages"]),r(v,{modelValue:t(s).password,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).password=a),label:"Пароль",type:"password","error-messages":t(o).password,onInput:e[3]||(e[3]=a=>t(o).password=[])},null,8,["modelValue","error-messages"])]),_:1}),r(G,null,{default:m(()=>[r(U),r(I,{type:"submit",color:"primary",variant:"flat",disabled:t(s).email.length<3||!t(s).password||t(i),loading:t(i)},{default:m(()=>e[5]||(e[5]=[c(" Войти ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1}))}});export{Y as default};
