import{_ as g}from"./CcOBTxZl.js";import{u as C}from"./C8wjtVdh.js";import{d as b,C as v,K as h,E as s,A as r,q as w,t as n,z as i,B as V,F as x,G as y,I as k}from"./DD7AHv1g.js";import{u as S}from"./A5x_le5I.js";import{V as T,a as N,b as q}from"./MCwiuoYB.js";import"./hYNdz_3a.js";import"./BI7us5jq.js";/* empty css        */import"./BQXSZ5PM.js";import"./JcpH5EyD.js";import"./DWGaNmQL.js";import"./Dgn9K1u6.js";const O=b({__name:"send_post",setup(B){C({title:"Отправка почты"});const{showError:a,showSuccess:l}=S(),{email:u,password:c}=v(),d=w().public.backendUrl,e=h({latitude:null,longitude:null}),m=t=>{e.latitude=t.coords.latitude,e.longitude=t.coords.longitude},p=()=>{a("Unable to retrieve your location")};navigator.geolocation?navigator.geolocation.getCurrentPosition(m,p):a("Geolocation is not supported by your browser");const f=async t=>{const{data:o}=await k(`${d}/order_sent.php`,{method:"POST",body:{staff_login:u,staff_password:c,qrcode:t,lat:e.latitude,lng:e.longitude}},"$YjhRa2PuT5");o.value.message?l(o.value.message):o.value.error&&a(o.value.error)};return(t,o)=>{const _=g;return n(),s(T,null,{default:r(()=>[i(N,null,{default:r(()=>o[0]||(o[0]=[V(" Отправка почты ")])),_:1}),i(q,null,{default:r(()=>[x(e).latitude?(n(),s(_,{key:0,onCodeScanned:f})):y("",!0)]),_:1})]),_:1})}}});export{O as default};
