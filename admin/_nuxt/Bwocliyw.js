import{_ as g}from"./D72RvGjE.js";import{u as C}from"./B83tnpwP.js";import{d as b,C as v,D as h,W as w,F as n,A as r,q as V,t as i,z as l,B as x,G as y,H as k,L as S}from"./CD-ciyMC.js";import{V as T,a as N,b as q}from"./S1xGE2Sl.js";import"./Dy0dx93s.js";import"./D2qL_eWx.js";import"./tHn_lS1N.js";const j=b({__name:"send_post",setup(B){C({title:"Отправка почты"});const{showError:a,showSuccess:u}=v(),{email:c,password:d}=h(),f=V().public.backendUrl,o=w({latitude:null,longitude:null}),m=t=>{o.latitude=t.coords.latitude,o.longitude=t.coords.longitude},p=()=>{a("Unable to retrieve your location")};navigator.geolocation?navigator.geolocation.getCurrentPosition(m,p):a("Geolocation is not supported by your browser");const _=async t=>{const{data:e,error:s}=await S(`${f}/order_sent.php`,{method:"POST",body:{staff_login:c,staff_password:d,qrcode:t,lat:o.latitude,lng:o.longitude}},"$YjhRa2PuT5");e&&e.value.message?u(e.value.message):e&&e.value.error?a(e.value.error):s&&a("Ошибка соединения с сервером")};return(t,e)=>{const s=g;return i(),n(T,null,{default:r(()=>[l(N,null,{default:r(()=>e[0]||(e[0]=[x(" Отправка почты ")])),_:1}),l(q,null,{default:r(()=>[y(o).latitude?(i(),n(s,{key:0,onCodeScanned:_})):k("",!0)]),_:1})]),_:1})}}});export{j as default};
